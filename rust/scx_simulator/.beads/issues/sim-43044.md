---
title: Simulate NUMA topology
status: open
priority: 2
issue_type: feature
created_at: 2026-02-13T13:04:21.197528295+00:00
updated_at: 2026-02-13T13:07:58.514518830+00:00
---

# Description

COSMOS supports NUMA-aware scheduling with per-node DSQs (numa_enabled=false,
nr_node_ids=1 disables this). When enabled:

- cosmos_init creates per-node DSQs in addition to SHARED_DSQ
- shared_dsq(cpu) returns a node-specific DSQ instead of always DSQ 0
- cpu_node() maps CPUs to NUMA nodes
- Task placement considers node locality

Work needed:
- Model NUMA topology in the simulator (node membership per CPU, distances)
- Support creating per-node DSQs
- Add cpu_node mapping infrastructure
- Add COSMOS test config with numa_enabled=true, nr_node_ids>1
- Verify per-node DSQ dispatch paths are exercised
