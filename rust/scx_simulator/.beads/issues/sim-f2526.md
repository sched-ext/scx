---
title: CPU affinity (cpus field) not enforced in simulator
status: closed
priority: 2
issue_type: task
labels:
- realism
created_at: 2026-02-13T21:27:06.815411378+00:00
updated_at: 2026-02-14T03:09:33.833779302+00:00
closed_at: 2026-02-14T03:09:33.833779172+00:00
---

# Description

The rtapp parser warns about cpus fields but ignores them. The simulator engine has no concept of per-task CPU affinity masks. When an rt-app workload specifies cpus: [0, 1], the simulator may schedule the task on any CPU. This affects the fidelity of real-vs-simulated comparisons since real rt-app runs with taskset enforce affinity. Implementing this requires: (1) adding an allowed_cpus field to TaskDef, (2) filtering CPU selection in the engine and in Scheduler::select_cpu to respect the mask.
