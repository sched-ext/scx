---
title: Per-CPU map emulation for LAVD
status: closed
priority: 0
issue_type: feature
depends_on:
  sim-db5df: blocks
created_at: 2026-02-13T18:13:24.004630148+00:00
updated_at: 2026-02-14T05:16:36.022353339+00:00
closed_at: 2026-02-14T05:16:36.022353209+00:00
---

# Description

LAVD cpu_ctx_stor is BPF_MAP_TYPE_PERCPU_ARRAY. get_cpu_ctx() via bpf_map_lookup_elem, get_cpu_ctx_id(cpu) via bpf_map_lookup_percpu_elem. Need nr_cpus copies of cpu_ctx.
