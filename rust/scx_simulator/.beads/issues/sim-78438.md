---
title: Comprehensive COSMOS simulator coverage
status: closed
priority: 1
issue_type: epic
depends_on:
  sim-43044: parent-child
  sim-818db: parent-child
  sim-64dde: parent-child
  sim-5a20c: parent-child
  sim-e126a: parent-child
  sim-dadf7: parent-child
  sim-6e8a7: parent-child
  sim-88b01: parent-child
  sim-ea456: parent-child
  sim-4f36f: parent-child
  sim-8e1e8: parent-child
  sim-6ce20: parent-child
created_at: 2026-02-13T13:03:07.629836715+00:00
updated_at: 2026-02-13T14:50:14.472829948+00:00
closed_at: 2026-02-13T14:50:14.472829868+00:00
---

# Description

Epic tracking all missing COSMOS scheduler features in the simulator.

Currently the simulator exercises only the core deadline-scheduling algorithm
(vruntime, wakeup frequency, sleep credit, weight-based slicing) with a single
shared DSQ and simple idle-CPU selection via scx_bpf_select_cpu_dfl.

All topology-aware (SMT, NUMA), hardware-adaptive (cpufreq, PMU), and
optimization features (mm_affinity, deferred wakeups, idle scanning, primary
domain) are completely disabled via cosmos_setup() globals and macro overrides.

The goal is to incrementally add simulator infrastructure so that all relevant
kernel and processor features are modeled, exercising all COSMOS code paths
meaningfully. Each sub-issue covers one feature area.

See also: semantic inaccuracies to fix (scx_bpf_task_cpu returning current_cpu
instead of the task's last-scheduled CPU, dispatch receiving prev=NULL, etc).
