---
title: LAVD trace shows 39.5% spurious yields for CPU-bound tasks
status: closed
priority: 2
issue_type: task
labels:
- realism
created_at: 2026-02-20T03:45:30.753942998+00:00
updated_at: 2026-02-20T03:56:10.576554081+00:00
closed_at: 2026-02-20T03:56:10.576553930+00:00
---

# Description

Trace analysis of the two_runners.json workload shows:

## Quantitative Findings

From 1 second simulation:
- Yield ratio: 39.5% (98 yields / 248 total stops)
- Global DSQ ratio: 42.5% (148 / 348 dispatches)

Real kernel for CPU-bound tasks:
- Yield ratio: ~0%
- Global DSQ ratio: ~0%

## Root Cause

The Phase model causes Run->Run transitions to trigger yields (handle_task_phase_complete line 1759-1791). Real CPU-bound tasks run until slice expiration.

## Impact

Tests LAVD dsq_insert_vtime paths that real CPU-bound tasks never exercise.

## Test Command

cargo test test_compare_lavd_trace_stats --test compare -- --nocapture
